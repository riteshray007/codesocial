class ChatEngine{constructor(e,s){this.userEmail=s,this.chatBox=$(`#${e}`),this.socket=io.connect("http://127.0.0.1:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("connection establised using sockets"),e.socket.emit("join_room",{user_email:e.userEmail,chatroom:"codesocial"}),e.socket.on("user_joined",(function(e){console.log("a user joined ",e)}))})),$(".send-message-container").submit((function(s){s.preventDefault();$(".send-message-container");let a=$(".message-form").val();""!=a&&$.ajax({type:"post",url:"chatbox/create",success:function(s){e.socket.emit("send_message",{message:a,user_email:e.userEmail,time:s.data.timeStamps,chatroom:"codesocial"})}}),$(".message-form").val("")})),e.socket.on("message_received",(function(s){console.log(s);let a="Other-message";s.user_email==e.userEmail&&(a="self-message"),"self-message"==a?$(".message-list").append(` \n                    <li class='self-message' > <span class='self-span' > ${s.message}  <sub> ${s.user_email} <sub/>   </span>  </li>\n                `):$(".message-list").append(` \n                <li class='Other-message' > <span class='others-span' > ${s.message} <sub> ${s.user_email} <sub/>  </span>   </li>\n                `)}))}}